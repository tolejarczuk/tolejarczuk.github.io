<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>CI/CD Pipeline for MATLAB Algorithm Deployment | My Digital Garden</title>
<meta name=keywords content><meta name=description content="CI/CD Pipeline for MATLAB Algorithm Deployment 1. Summary This document outlines the CI/CD (Continuous Integration/Continuous Delivery) pipeline implemented for the MATLAB algorithm project. Utilizing GitHub Actions, the pipeline automates the process of building, versioning and deploying Docker images containing the MATLAB algorithm to the GitHub Container Registry (GHCR). The pipeline is triggered whenever changes are pushed to the &lsquo;main&rsquo; branch, ensuring that the latest version of the algorithm is readily available for deployment, streamlining the development and release process."><meta name=author content="Tomasz Olejarczuk"><link rel=canonical href=https://tolejarczuk.github.io/posts/school/semester-4/teamium-project/cicd-pipeline-for-matlab-algorithm-deployment/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://tolejarczuk.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tolejarczuk.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tolejarczuk.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://tolejarczuk.github.io/apple-touch-icon.png><link rel=mask-icon href=https://tolejarczuk.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://tolejarczuk.github.io/posts/school/semester-4/teamium-project/cicd-pipeline-for-matlab-algorithm-deployment/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="CI/CD Pipeline for MATLAB Algorithm Deployment"><meta property="og:description" content="CI/CD Pipeline for MATLAB Algorithm Deployment 1. Summary This document outlines the CI/CD (Continuous Integration/Continuous Delivery) pipeline implemented for the MATLAB algorithm project. Utilizing GitHub Actions, the pipeline automates the process of building, versioning and deploying Docker images containing the MATLAB algorithm to the GitHub Container Registry (GHCR). The pipeline is triggered whenever changes are pushed to the &lsquo;main&rsquo; branch, ensuring that the latest version of the algorithm is readily available for deployment, streamlining the development and release process."><meta property="og:type" content="article"><meta property="og:url" content="https://tolejarczuk.github.io/posts/school/semester-4/teamium-project/cicd-pipeline-for-matlab-algorithm-deployment/"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content="CI/CD Pipeline for MATLAB Algorithm Deployment"><meta name=twitter:description content="CI/CD Pipeline for MATLAB Algorithm Deployment 1. Summary This document outlines the CI/CD (Continuous Integration/Continuous Delivery) pipeline implemented for the MATLAB algorithm project. Utilizing GitHub Actions, the pipeline automates the process of building, versioning and deploying Docker images containing the MATLAB algorithm to the GitHub Container Registry (GHCR). The pipeline is triggered whenever changes are pushed to the &lsquo;main&rsquo; branch, ensuring that the latest version of the algorithm is readily available for deployment, streamlining the development and release process."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://tolejarczuk.github.io/posts/"},{"@type":"ListItem","position":2,"name":"CI/CD Pipeline for MATLAB Algorithm Deployment","item":"https://tolejarczuk.github.io/posts/school/semester-4/teamium-project/cicd-pipeline-for-matlab-algorithm-deployment/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"CI/CD Pipeline for MATLAB Algorithm Deployment","name":"CI\/CD Pipeline for MATLAB Algorithm Deployment","description":"CI/CD Pipeline for MATLAB Algorithm Deployment 1. Summary This document outlines the CI/CD (Continuous Integration/Continuous Delivery) pipeline implemented for the MATLAB algorithm project. Utilizing GitHub Actions, the pipeline automates the process of building, versioning and deploying Docker images containing the MATLAB algorithm to the GitHub Container Registry (GHCR). The pipeline is triggered whenever changes are pushed to the \u0026lsquo;main\u0026rsquo; branch, ensuring that the latest version of the algorithm is readily available for deployment, streamlining the development and release process.","keywords":[],"articleBody":"CI/CD Pipeline for MATLAB Algorithm Deployment 1. Summary This document outlines the CI/CD (Continuous Integration/Continuous Delivery) pipeline implemented for the MATLAB algorithm project. Utilizing GitHub Actions, the pipeline automates the process of building, versioning and deploying Docker images containing the MATLAB algorithm to the GitHub Container Registry (GHCR). The pipeline is triggered whenever changes are pushed to the ‘main’ branch, ensuring that the latest version of the algorithm is readily available for deployment, streamlining the development and release process.\n2. Introduction Purpose: The CI/CD pipeline aims to streamline the development and deployment workflow for the MATLAB algorithm project. Key objectives include:\nAutomation: Automate the repetitive tasks of building, testing (if applicable), versioning, and publishing Docker images, reducing manual intervention and potential errors. Consistency: Enforce a consistent pipeline process, ensuring builds and deployments follow predefined steps, promoting reliability. Agility: Enable frequent updates to the MATLAB algorithm with the confidence that automated processes will build and deploy changes seamlessly. Scope: The pipeline focuses on the following key components:\nMATLAB Code Repository: The source code for the MATLAB algorithm, hosted on GitHub. Docker Images: The containerized format used to package and deploy the MATLAB algorithm. GitHub Container Registry (GHCR): The repository for storing the built Docker images. 3. Workflow Overview Trigger:\nThe CI/CD pipeline is initiated whenever new code is pushed to the ‘main’ branch of the GitHub repository. High-Level Steps:\nSemantic Versioning:\nThe pipeline determines the appropriate version increment (major, minor, or patch) based on the nature of the committed changes. A new version tag is generated and applied to the Docker image. Docker Image Build:\nBase Image (if needed): The pipeline checks if a base image with the required MATLAB runtime dependencies exists. If not, a new base image is built. Runtime Image (if needed): The pipeline checks if a runtime image exists; if not, it’s created. This image potentially layers on top of the base image. Algorithm Image: The MATLAB algorithm code is packaged into a Docker image, leveraging the runtime (and potentially the base) image as its foundation. This final artifact is given the new version tag and a “latest” tag. Image Publishing:\nThe newly built and tagged Docker image containing the MATLAB algorithm is pushed to the GitHub Container Registry (GHCR). graph TD A[Code Push to 'main'] --\u003e B[Versioning] B --\u003e C[Build Base Image] B --\u003e D[Build Runtime Image] B --\u003e E[Build Algorithm Image] C --\u003e F[Push Base Image] D --\u003e F[Push Runtime Image] E --\u003e F[Push Algorithm Image] 4. Pipeline Breakdown (Detailed) Job: push-matlab-algorithm-image\nruns-on: ubuntu-latest The pipeline executes within an Ubuntu-based environment. Steps\nCheckout (actions/checkout@v4)\nRetrieves a copy of your project’s code from the GitHub repository. This is essential for subsequent build steps. Semantic Versioning (anothrNick/github-tag-action@1.69.0)\nKey Tasks: Examines the nature of changes in the code push to determine the appropriate version increment (e.g., major.minor.patch). Generates a new unique version tag to be applied to the Docker image. Note: Explain how anothrNick/github-tag-action integrates with your code analysis or the commit message conventions you might use to drive versioning logic. GitHub Container Registry (GHCR) Login (docker/login-action@v3)\nAuthenticates with GHCR using your GitHub credentials. This grants permission to push images in subsequent steps. Build Runtime Base Image\nConditional Logic: If the ghcr.io/teamiumdev/matlabruntimebase:r2024a image doesn’t already exist, it is built. Dockerfile: This build is directed by Dockerfile.deps. Purpose: This image installs MATLAB Runtime dependencies, providing a common foundation for later builds. Build Runtime Image\nConditional Logic: Similarly, the ghcr.io/teamiumdev/matlabruntime:r2024a image is only built if it doesn’t exist. Dockerfile: This step uses Dockerfile.runtime. Purpose : This layer might add additional dependencies or configuration before packaging the algorithm itself. Build Inventory Image\nDockerfile: It uses a dedicated Dockerfile (e.g., Dockerfile). Image Building: Bundles the MATLAB algorithm code, along with necessary runtime components, creating the final deployable image. Tagging: Version Tag: The new tag generated in the versioning step is applied. ’latest’ Tag: This tag offers a convenient reference for deployment. Push Inventory Image\nDestination: Pushes the newly built image to GHCR, along with its tags, making it available for deployment. 4.1 Actual code: name: Deploy Images to GHCR and Auto Tag on: push: branches: - main jobs: push-matlab-algorithm-image: runs-on: ubuntu-latest steps: - uses: actions/checkout@v4 with: fetch-depth: '0' - name: Minor version for each merge id: taggerDryRun uses: anothrNick/github-tag-action@1.69.0 env: GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} WITH_V: false DRY_RUN: true - name: echo new tag run: | echo \"The next tag version will be: ${{ steps.taggerDryRun.outputs.new_tag }}\" - name: echo tag run: | echo \"The current tag is: ${{ steps.taggerDryRun.outputs.tag }}\" - name: echo part run: | echo \"The version increment was: ${{ steps.taggerDryRun.outputs.part }}\" - name: 'Checkout GitHub Action' uses: actions/checkout@v4 - name: 'Login to GitHub Container Registry' uses: docker/login-action@v3 with: registry: ghcr.io username: ${{github.actor}} password: ${{secrets.GITHUB_TOKEN}} - name: 'Build runtime base image' run: | if docker manifest inspect ghcr.io/teamiumdev/matlabruntimebase:r2024a then echo \"It exists. Skip the build...\" else echo \"Building new image..\" docker build . --file \"Dockerfile.deps\" --tag ghcr.io/teamiumdev/matlabruntimebase:r2024a docker push ghcr.io/teamiumdev/matlabruntimebase:r2024a fi - name: 'Build runtime image' run: | if docker manifest inspect ghcr.io/teamiumdev/matlabruntime:r2024a then echo \"It exists. Skip the build...\" else echo \"Building new image..\" docker build . --file \"Dockerfile.runtime\" --tag ghcr.io/teamiumdev/matlabruntime:r2024a docker push ghcr.io/teamiumdev/matlabruntime:r2024a fi - name: 'Build Inventory Image' run: docker build . --file Dockerfile --tag ghcr.io/teamiumdev/matlab-algorithm:${{ steps.taggerDryRun.outputs.new_tag }} --tag ghcr.io/teamiumdev/matlab-algorithm:latest - name: Minor version for each merge id: taggerFinal uses: anothrNick/github-tag-action@1.69.0 env: GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} WITH_V: false - name: 'Push Inventory Image' run: docker push --all-tags ghcr.io/teamiumdev/matlab-algorithm 5. Deployment Considerations (Future) Currently, the CI/CD pipeline concludes with the production of Docker images stored in GitHub Container Registry (GHCR). To fully leverage the benefits of containerization and streamlined deployment, here are potential deployment pathways to consider as the project scales:\nKubernetes for Orchestration:\nBenefits: Kubernetes is a powerful container orchestration platform ideal for managing complex deployments. Key advantages include: Scalability: Easily deploy multiple instances of your MATLAB image to handle increased load. Resilience: Kubernetes offers self-healing, automatic restarts, and rollout/rollback features for high availability. Resource Management: Optimize resource usage across your application components. Deployment Tools:\nArgoCD: A GitOps deployment tool designed for Kubernetes. Synchronizes the desired state defined in Git with the running Kubernetes cluster for continuous deployment. Advantages: Declarative configuration, automated updates when code changes, enhanced observability. Jenkins: A versatile automation server that can be used to orchestrate deployments to Kubernetes. Advantages: Extensible, integrates well with existing pipelines and tools. Next Steps:\nContainerization: Ensure your CI/CD pipeline consistently produces deployment-ready Docker images for your MATLAB algorithm. Deployment Manifests: Craft Kubernetes deployment manifests (YAML files) that define how your MATLAB Algorithm image should be deployed within the cluster (replicas, resource needs, etc.) Tool Choice: Evaluate both ArgoCD and Jenkins, considering factors like team familiarity, desired level of automation, and integration with existing infrastructure. 6. Additional Considerations Security: Address security measures for GitHub Actions secrets and the GHCR access token. Error Handling: Outline any error reporting or notification mechanisms integrated into the pipeline. Future Improvements: Potential areas for pipeline optimization (e.g., caching for Docker builds, parallelizing tests, additional automation steps). Last Modified: =dateformat(this.file.mtime, \"DDDD, HH:mm\")\n0.1.1. Tags: =this.file.tags\nList FROM #kubernetes ","wordCount":"1172","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Tomasz Olejarczuk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://tolejarczuk.github.io/posts/school/semester-4/teamium-project/cicd-pipeline-for-matlab-algorithm-deployment/"},"publisher":{"@type":"Organization","name":"My Digital Garden","logo":{"@type":"ImageObject","url":"https://tolejarczuk.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tolejarczuk.github.io/ accesskey=h title="My Digital Garden (Alt + H)">My Digital Garden</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">CI/CD Pipeline for MATLAB Algorithm Deployment</h1><div class=post-meta>Tomasz Olejarczuk</div></header><div class=post-content><h1 id=cicd-pipeline-for-matlab-algorithm-deployment>CI/CD Pipeline for MATLAB Algorithm Deployment<a hidden class=anchor aria-hidden=true href=#cicd-pipeline-for-matlab-algorithm-deployment>#</a></h1><h1 id=1-summary>1. Summary<a hidden class=anchor aria-hidden=true href=#1-summary>#</a></h1><p>This document outlines the CI/CD (Continuous Integration/Continuous Delivery) pipeline implemented for the MATLAB algorithm project. Utilizing GitHub Actions, the pipeline automates the process of building, versioning and deploying Docker images containing the MATLAB algorithm to the GitHub Container Registry (GHCR). The pipeline is triggered whenever changes are pushed to the &lsquo;main&rsquo; branch, ensuring that the latest version of the algorithm is readily available for deployment, streamlining the development and release process.</p><h1 id=2-introduction>2. Introduction<a hidden class=anchor aria-hidden=true href=#2-introduction>#</a></h1><p><strong>Purpose:</strong> The CI/CD pipeline aims to streamline the development and deployment workflow for the MATLAB algorithm project. Key objectives include:</p><ul><li><strong>Automation:</strong> Automate the repetitive tasks of building, testing (if applicable), versioning, and publishing Docker images, reducing manual intervention and potential errors.</li><li><strong>Consistency:</strong> Enforce a consistent pipeline process, ensuring builds and deployments follow predefined steps, promoting reliability.</li><li><strong>Agility:</strong> Enable frequent updates to the MATLAB algorithm with the confidence that automated processes will build and deploy changes seamlessly.</li></ul><p><strong>Scope:</strong> The pipeline focuses on the following key components:</p><ul><li><strong>MATLAB Code Repository:</strong> The source code for the MATLAB algorithm, hosted on GitHub.</li><li><strong>Docker Images:</strong> The containerized format used to package and deploy the MATLAB algorithm.</li><li><strong>GitHub Container Registry (GHCR):</strong> The repository for storing the built Docker images.</li></ul><h1 id=3-workflow-overview>3. Workflow Overview<a hidden class=anchor aria-hidden=true href=#3-workflow-overview>#</a></h1><p><strong>Trigger:</strong></p><ul><li>The CI/CD pipeline is initiated whenever new code is pushed to the &lsquo;main&rsquo; branch of the GitHub repository.</li></ul><p><strong>High-Level Steps:</strong></p><ol><li><p><strong>Semantic Versioning:</strong></p><ul><li>The pipeline determines the appropriate version increment (major, minor, or patch) based on the nature of the committed changes.</li><li>A new version tag is generated and applied to the Docker image.</li></ul></li><li><p><strong>Docker Image Build:</strong></p><ul><li><strong>Base Image (if needed):</strong> The pipeline checks if a base image with the required MATLAB runtime dependencies exists. If not, a new base image is built.</li><li><strong>Runtime Image (if needed):</strong> The pipeline checks if a runtime image exists; if not, it&rsquo;s created. This image potentially layers on top of the base image.</li><li><strong>Algorithm Image:</strong> The MATLAB algorithm code is packaged into a Docker image, leveraging the runtime (and potentially the base) image as its foundation. This final artifact is given the new version tag and a &ldquo;latest&rdquo; tag.</li></ul></li><li><p><strong>Image Publishing:</strong></p><ul><li>The newly built and tagged Docker image containing the MATLAB algorithm is pushed to the GitHub Container Registry (GHCR).</li></ul></li></ol><pre tabindex=0><code class=language-mermaid data-lang=mermaid>graph TD
    A[Code Push to &#39;main&#39;] --&gt; B[Versioning] 
    B --&gt; C[Build Base Image]
    B --&gt; D[Build Runtime Image]
    B --&gt; E[Build Algorithm Image] 
    C --&gt; F[Push Base Image]
    D --&gt; F[Push Runtime Image]
    E --&gt; F[Push Algorithm Image]
</code></pre><p><img src=/posts/School/Semester%204/Teamium%20project/Bins/Images/mermaid_cicd.png></p><h1 id=4-pipeline-breakdown-detailed>4. Pipeline Breakdown (Detailed)<a hidden class=anchor aria-hidden=true href=#4-pipeline-breakdown-detailed>#</a></h1><p><strong>Job: push-matlab-algorithm-image</strong></p><ul><li><strong>runs-on:</strong> ubuntu-latest<ul><li>The pipeline executes within an Ubuntu-based environment.</li></ul></li></ul><p><strong>Steps</strong></p><ol><li><p><strong>Checkout</strong> (<code>actions/checkout@v4</code>)</p><ul><li>Retrieves a copy of your project&rsquo;s code from the GitHub repository. This is essential for subsequent build steps.</li></ul></li><li><p><strong>Semantic Versioning</strong> (<code>anothrNick/github-tag-action@1.69.0</code>)</p><ul><li><strong>Key Tasks:</strong><ul><li>Examines the nature of changes in the code push to determine the appropriate version increment (e.g., major.minor.patch).</li><li>Generates a new unique version tag to be applied to the Docker image.</li></ul></li><li><strong>Note:</strong> Explain how <code>anothrNick/github-tag-action</code> integrates with your code analysis or the commit message conventions you might use to drive versioning logic.</li></ul></li><li><p><strong>GitHub Container Registry (GHCR) Login</strong> (<code>docker/login-action@v3</code>)</p><ul><li>Authenticates with GHCR using your GitHub credentials. This grants permission to push images in subsequent steps.</li></ul></li><li><p><strong>Build Runtime Base Image</strong></p><ul><li><strong>Conditional Logic:</strong> If the <code>ghcr.io/teamiumdev/matlabruntimebase:r2024a</code> image doesn&rsquo;t already exist, it is built.</li><li><strong>Dockerfile:</strong> This build is directed by <code>Dockerfile.deps</code>.</li><li><strong>Purpose:</strong> This image installs MATLAB Runtime dependencies, providing a common foundation for later builds.</li></ul></li><li><p><strong>Build Runtime Image</strong></p><ul><li><strong>Conditional Logic:</strong> Similarly, the <code>ghcr.io/teamiumdev/matlabruntime:r2024a</code> image is only built if it doesn&rsquo;t exist.</li><li><strong>Dockerfile:</strong> This step uses <code>Dockerfile.runtime</code>.</li><li><strong>Purpose :</strong> This layer might add additional dependencies or configuration before packaging the algorithm itself.</li></ul></li><li><p><strong>Build Inventory Image</strong></p><ul><li><strong>Dockerfile:</strong> It uses a dedicated Dockerfile (e.g., <code>Dockerfile</code>).</li><li><strong>Image Building:</strong> Bundles the MATLAB algorithm code, along with necessary runtime components, creating the final deployable image.</li><li><strong>Tagging:</strong><ul><li><strong>Version Tag:</strong> The new tag generated in the versioning step is applied.</li><li><strong>&rsquo;latest&rsquo; Tag:</strong> This tag offers a convenient reference for deployment.</li></ul></li></ul></li><li><p><strong>Push Inventory Image</strong></p><ul><li><strong>Destination:</strong> Pushes the newly built image to GHCR, along with its tags, making it available for deployment.</li></ul></li></ol><h2 id=41-actual-code>4.1 Actual code:<a hidden class=anchor aria-hidden=true href=#41-actual-code>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy Images to GHCR and Auto Tag</span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>main</span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push-matlab-algorithm-image</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v4</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>fetch-depth</span>: <span style=color:#e6db74>&#39;0&#39;</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Minor version for each merge</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>id</span>: <span style=color:#ae81ff>taggerDryRun</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>anothrNick/github-tag-action@1.69.0</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>GITHUB_TOKEN</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>WITH_V</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>DRY_RUN</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>echo new tag</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        echo &#34;The next tag version will be: ${{ steps.taggerDryRun.outputs.new_tag }}&#34;</span>        
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>echo tag</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        echo &#34;The current tag is: ${{ steps.taggerDryRun.outputs.tag }}&#34;</span>        
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>echo part</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        echo &#34;The version increment was: ${{ steps.taggerDryRun.outputs.part }}&#34;</span>        
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Checkout GitHub Action&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v4</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Login to GitHub Container Registry&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>docker/login-action@v3</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>registry</span>: <span style=color:#ae81ff>ghcr.io</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>username</span>: <span style=color:#ae81ff>${{github.actor}}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>password</span>: <span style=color:#ae81ff>${{secrets.GITHUB_TOKEN}}</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Build runtime base image&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        if docker manifest inspect ghcr.io/teamiumdev/matlabruntimebase:r2024a
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        then
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo &#34;It exists. Skip the build...&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        else
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo &#34;Building new image..&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          docker build . --file &#34;Dockerfile.deps&#34; --tag ghcr.io/teamiumdev/matlabruntimebase:r2024a
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          docker push ghcr.io/teamiumdev/matlabruntimebase:r2024a
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        fi</span>        
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Build runtime image&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        if docker manifest inspect ghcr.io/teamiumdev/matlabruntime:r2024a
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        then
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo &#34;It exists. Skip the build...&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        else
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo &#34;Building new image..&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          docker build . --file &#34;Dockerfile.runtime&#34; --tag ghcr.io/teamiumdev/matlabruntime:r2024a
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          docker push ghcr.io/teamiumdev/matlabruntime:r2024a
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        fi</span>        
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Build Inventory Image&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: <span style=color:#ae81ff>docker build . --file Dockerfile --tag ghcr.io/teamiumdev/matlab-algorithm:${{ steps.taggerDryRun.outputs.new_tag }} --tag ghcr.io/teamiumdev/matlab-algorithm:latest</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Minor version for each merge</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>id</span>: <span style=color:#ae81ff>taggerFinal</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>anothrNick/github-tag-action@1.69.0</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>GITHUB_TOKEN</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>WITH_V</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Push Inventory Image&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: <span style=color:#ae81ff>docker push --all-tags ghcr.io/teamiumdev/matlab-algorithm</span>
</span></span></code></pre></div><h1 id=5-deployment-considerations-future>5. Deployment Considerations (Future)<a hidden class=anchor aria-hidden=true href=#5-deployment-considerations-future>#</a></h1><p>Currently, the CI/CD pipeline concludes with the production of Docker images stored in GitHub Container Registry (GHCR). To fully leverage the benefits of containerization and streamlined deployment, here are potential deployment pathways to consider as the project scales:</p><p><strong>Kubernetes for Orchestration:</strong></p><ul><li><strong>Benefits:</strong> Kubernetes is a powerful container orchestration platform ideal for managing complex deployments. Key advantages include:<ul><li><strong>Scalability:</strong> Easily deploy multiple instances of your MATLAB image to handle increased load.</li><li><strong>Resilience:</strong> Kubernetes offers self-healing, automatic restarts, and rollout/rollback features for high availability.</li><li><strong>Resource Management:</strong> Optimize resource usage across your application components.</li></ul></li></ul><p><strong>Deployment Tools:</strong></p><ul><li><strong>ArgoCD:</strong> A GitOps deployment tool designed for Kubernetes. Synchronizes the desired state defined in Git with the running Kubernetes cluster for continuous deployment.<ul><li><strong>Advantages:</strong> Declarative configuration, automated updates when code changes, enhanced observability.</li></ul></li><li><strong>Jenkins:</strong> A versatile automation server that can be used to orchestrate deployments to Kubernetes.<ul><li><strong>Advantages:</strong> Extensible, integrates well with existing pipelines and tools.</li></ul></li></ul><p><strong>Next Steps:</strong></p><ol><li><strong>Containerization:</strong> Ensure your CI/CD pipeline consistently produces deployment-ready Docker images for your MATLAB algorithm.</li><li><strong>Deployment Manifests:</strong> Craft Kubernetes deployment manifests (YAML files) that define how your MATLAB Algorithm image should be deployed within the cluster (replicas, resource needs, etc.)</li><li><strong>Tool Choice:</strong> Evaluate both ArgoCD and Jenkins, considering factors like team familiarity, desired level of automation, and integration with existing infrastructure.</li></ol><h1 id=6-additional-considerations>6. Additional Considerations<a hidden class=anchor aria-hidden=true href=#6-additional-considerations>#</a></h1><ul><li><strong>Security:</strong> Address security measures for GitHub Actions secrets and the GHCR access token.</li><li><strong>Error Handling:</strong> Outline any error reporting or notification mechanisms integrated into the pipeline.</li><li><strong>Future Improvements:</strong> Potential areas for pipeline optimization (e.g., caching for Docker builds, parallelizing tests, additional automation steps).</li></ul><hr><p>Last Modified: <code>=dateformat(this.file.mtime, "DDDD, HH:mm")</code></p><h4 id=011-tags>0.1.1. Tags:<a hidden class=anchor aria-hidden=true href=#011-tags>#</a></h4><p><code>=this.file.tags</code></p><pre tabindex=0><code class=language-dataview data-lang=dataview>List FROM #kubernetes
</code></pre></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://tolejarczuk.github.io/>My Digital Garden</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>